<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Karan's Life OS â€” 2026 Planner</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,400&display=swap" rel="stylesheet">
<style>
/* â”€â”€â”€ THEME VARIABLES â”€â”€â”€ */
[data-theme="dark"] {
  --bg:      #060a12;
  --bg2:     #0d1420;
  --bg3:     #111827;
  --card:    #0f1a2a;
  --border:  #1e2d45;
  --text:    #e2e8f0;
  --text2:   #94a3b8;
  --muted:   #64748b;
  --shadow:  rgba(0,0,0,0.5);
  --stripe:  #0b1624;
}
[data-theme="light"] {
  --bg:      #f0f4f8;
  --bg2:     #e2e8f0;
  --bg3:     #d1dde9;
  --card:    #ffffff;
  --border:  #cbd5e1;
  --text:    #1e293b;
  --text2:   #475569;
  --muted:   #94a3b8;
  --shadow:  rgba(0,0,0,0.12);
  --stripe:  #f8fafc;
}
:root {
  --accent: #e94560;
  --amber:  #f59e0b;
  --green:  #10b981;
  --indigo: #6366f1;
  --pink:   #ec4899;
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body {
  background:var(--bg); color:var(--text);
  font-family:'DM Sans',sans-serif; min-height:100vh;
  transition:background .3s,color .3s;
}

/* HEADER */
.hdr {
  position:sticky; top:0; z-index:200;
  background:color-mix(in srgb,var(--bg) 88%,transparent);
  backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:14px;
  padding:0 22px; height:58px;
}
.logo { font-family:'Syne',sans-serif; font-weight:800; font-size:17px;
  background:linear-gradient(135deg,#e94560,#f59e0b);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; white-space:nowrap; }
.logo em { font-size:11px; color:var(--muted); -webkit-text-fill-color:var(--muted); font-weight:400; font-style:normal; margin-left:5px; }
.nav { display:flex; gap:2px; flex:1; justify-content:center; }
.nb {
  padding:5px 13px; border-radius:8px; border:1px solid transparent;
  background:transparent; color:var(--muted); cursor:pointer;
  font-family:'DM Sans',sans-serif; font-size:13px; font-weight:500;
  transition:all .18s; white-space:nowrap;
}
.nb:hover { color:var(--text); background:var(--bg2); }
.nb.on { background:var(--bg2); color:var(--accent); border-color:var(--border); }
.hdr-r { display:flex; align-items:center; gap:10px; flex-shrink:0; }
.dpill { font-size:11px; color:var(--text2); background:var(--bg2); border:1px solid var(--border);
  padding:4px 12px; border-radius:20px; white-space:nowrap; }
.ttog { width:40px; height:22px; border-radius:11px; border:1px solid var(--border);
  background:var(--bg2); cursor:pointer; position:relative; transition:background .3s; flex-shrink:0; }
.ttog::after { content:''; position:absolute; top:2px; left:2px; width:16px; height:16px;
  border-radius:50%; background:var(--accent); transition:transform .3s; }
[data-theme="light"] .ttog::after { transform:translateX(18px); }
.tlbl { font-size:14px; line-height:1; }

/* MAIN */
.wrap { padding:26px 22px; max-width:1400px; margin:0 auto; }
.pg { display:none; }
.pg.on { display:block; animation:fi .25s ease; }
@keyframes fi { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }

/* TYPOGRAPHY */
.stitle {
  font-family:'Syne',sans-serif; font-weight:700; font-size:11px; letter-spacing:1.8px;
  text-transform:uppercase; color:var(--muted); margin-bottom:14px;
  display:flex; align-items:center; gap:12px;
}
.stitle::after { content:''; flex:1; height:1px; background:var(--border); }
.ptitle { font-family:'Syne',sans-serif; font-weight:800; font-size:28px; letter-spacing:-1px; margin-bottom:5px; }
.psub { color:var(--muted); font-size:13px; margin-bottom:22px; line-height:1.5; }

/* HERO */
.hero { text-align:center; padding:36px 0 44px; }
.hbadge {
  display:inline-flex; align-items:center; gap:6px;
  background:color-mix(in srgb,var(--accent) 10%,transparent);
  border:1px solid color-mix(in srgb,var(--accent) 25%,transparent);
  color:var(--accent); font-size:10px; letter-spacing:2px; text-transform:uppercase;
  padding:5px 14px; border-radius:20px; margin-bottom:18px;
  font-family:'Syne',sans-serif; font-weight:600;
}
.hero h1 { font-family:'Syne',sans-serif; font-weight:800; font-size:clamp(30px,5vw,54px);
  line-height:1.05; letter-spacing:-2px; color:var(--text); margin-bottom:13px; }
.hero h1 em { background:linear-gradient(135deg,#e94560,#f59e0b);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-style:normal; }
.hero p { color:var(--muted); font-size:14px; max-width:440px; margin:0 auto 24px; line-height:1.6; }

/* STATS */
.sg { display:grid; grid-template-columns:repeat(4,1fr); gap:13px; margin-bottom:26px; }
.sc {
  background:var(--card); border:1px solid var(--border); border-radius:13px;
  padding:16px 18px; position:relative; overflow:hidden;
  transition:transform .18s,border-color .18s,box-shadow .18s;
}
.sc:hover { transform:translateY(-2px); border-color:color-mix(in srgb,var(--accent) 35%,transparent); box-shadow:0 4px 18px var(--shadow); }
.sc::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--accent),var(--amber)); }
.sn { font-family:'Syne',sans-serif; font-size:30px; font-weight:800;
  background:linear-gradient(135deg,var(--accent),var(--amber));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.sl { color:var(--muted); font-size:10px; text-transform:uppercase; letter-spacing:1px; margin-top:4px; }

/* GOALS */
.gg { display:grid; grid-template-columns:repeat(auto-fill,minmax(310px,1fr)); gap:13px; }
.gc {
  background:var(--card); border:1px solid var(--border); border-radius:13px;
  padding:18px; position:relative; overflow:hidden;
  transition:all .18s; cursor:default;
}
.gc:hover { border-color:color-mix(in srgb,var(--accent) 35%,transparent); transform:translateY(-2px); box-shadow:0 6px 22px var(--shadow); }
.garea { display:inline-flex; align-items:center; gap:5px; font-size:10px; color:var(--muted);
  text-transform:uppercase; letter-spacing:1px; background:var(--bg2); padding:3px 10px; border-radius:20px; margin-bottom:9px; }
.gtitle { font-family:'Syne',sans-serif; font-weight:700; font-size:14px; margin-bottom:6px; line-height:1.3; }
.gwhy { color:var(--text2); font-size:12px; line-height:1.5; margin-bottom:12px; }
.pb { height:4px; background:var(--bg2); border-radius:2px; margin:8px 0 5px; overflow:hidden; }
.pf { height:100%; border-radius:2px; background:linear-gradient(90deg,var(--accent),var(--amber)); transition:width .5s ease; }
.gsb { font-size:10px; padding:2px 9px; border-radius:20px; background:color-mix(in srgb,var(--amber) 15%,transparent); color:var(--amber); }
.gsb.done { background:color-mix(in srgb,var(--green) 15%,transparent); color:var(--green); }
.gsb.pend { background:color-mix(in srgb,var(--muted) 15%,transparent); color:var(--muted); }
.gmeta { display:flex; align-items:center; justify-content:space-between; padding-top:10px; border-top:1px solid var(--border); margin-top:10px; }
.gdl { font-size:11px; color:var(--amber); }
.srow { display:flex; align-items:center; gap:8px; font-size:12px; color:var(--text2);
  padding:5px 0; border-bottom:1px solid color-mix(in srgb,var(--border) 50%,transparent);
  cursor:pointer; transition:color .15s; }
.srow:hover { color:var(--text); }
.srow.ck { color:var(--green); }
.srow.ck .sb { background:var(--green); border-color:var(--green); }
.sb { width:15px; height:15px; border-radius:4px; border:1.5px solid var(--border);
  flex-shrink:0; display:flex; align-items:center; justify-content:center;
  font-size:9px; color:#fff; transition:all .15s; }

/* SCHEDULE */
.sw { background:var(--card); border:1px solid var(--border); border-radius:13px; padding:18px 10px; }
.sb2 {
  display:grid; grid-template-columns:148px 1fr auto; gap:13px; align-items:start;
  padding:12px 14px; border-left:2px solid var(--border); margin-left:18px;
  position:relative; transition:all .15s; border-radius:0 9px 9px 0; cursor:pointer;
}
.sb2:hover { background:color-mix(in srgb,var(--bg2) 55%,transparent); }
.sb2.cur  { border-left-color:var(--accent); background:color-mix(in srgb,var(--accent) 5%,transparent); }
.sb2.dn   { border-left-color:var(--green); }
.sb2::before { content:''; position:absolute; left:-7px; top:16px;
  width:12px; height:12px; border-radius:50%; background:var(--border); border:2px solid var(--bg); }
.sb2.cur::before { background:var(--accent); box-shadow:0 0 0 4px color-mix(in srgb,var(--accent) 18%,transparent); }
.sb2.dn::before  { background:var(--green); }
.st { font-family:'Syne',sans-serif; font-size:11px; font-weight:600; color:var(--muted); padding-top:2px; white-space:nowrap; }
.st.now { color:var(--accent); }
.stit { font-weight:600; font-size:13px; margin-bottom:3px; }
.sdet { color:var(--text2); font-size:12px; line-height:1.5; }
.sgt { font-size:10px; background:color-mix(in srgb,var(--indigo) 15%,transparent);
  color:color-mix(in srgb,var(--indigo) 75%,var(--text)); padding:2px 8px; border-radius:20px;
  margin-top:5px; display:inline-block; }
.pt { font-size:10px; padding:2px 8px; border-radius:20px; white-space:nowrap; align-self:start; margin-top:2px; }
.pt-c { background:color-mix(in srgb,#ef4444 15%,transparent); color:#ef4444; }
.pt-h { background:color-mix(in srgb,var(--amber) 15%,transparent); color:var(--amber); }
.pt-m { background:color-mix(in srgb,var(--green) 15%,transparent); color:var(--green); }

/* HABIT TRACKER */
.hw { overflow-x:auto; background:var(--card); border:1px solid var(--border); border-radius:13px; }
.ht { width:100%; border-collapse:collapse; min-width:860px; }

/* â”€â”€ FIX: Correct sticky header at exact header height â”€â”€ */
.ht thead { position:sticky; top:58px; z-index:10; }
.ht thead tr th {
  background:var(--bg2);
  padding:9px 3px; text-align:center;
  font-family:'Syne',sans-serif; font-size:10px; font-weight:700;
  color:var(--muted); letter-spacing:.5px;
  border-bottom:2px solid var(--border);
}
.ht thead tr th:nth-child(1) { width:40px; min-width:40px; text-align:center; }
.ht thead tr th:nth-child(2) { text-align:left; padding-left:16px; min-width:195px; }
.ht thead tr th.th-today { color:var(--accent); background:color-mix(in srgb,var(--accent) 8%,var(--bg2)); }

/* rows */
.ht tbody tr { border-bottom:1px solid color-mix(in srgb,var(--border) 55%,transparent); }
.ht tbody tr:nth-child(even) { background:var(--stripe); }
.ht td { padding:5px 3px; text-align:center; vertical-align:middle; }
.ht td:nth-child(1) { font-size:17px; }
.ht td:nth-child(2) { text-align:left; padding-left:16px; font-size:13px; font-weight:500; color:var(--text); }
.ht td:last-child, .ht td:nth-last-child(2) { padding:5px 10px; }

.hc {
  width:27px; height:27px; border-radius:6px; cursor:pointer;
  border:1px solid var(--border); background:var(--bg2);
  display:flex; align-items:center; justify-content:center;
  margin:0 auto; font-size:11px; transition:all .12s; user-select:none;
}
.hc:hover { border-color:var(--accent); transform:scale(1.12); }
.hc.dn { background:color-mix(in srgb,var(--green) 20%,transparent); border-color:var(--green); }
.hc.ms { background:color-mix(in srgb,#ef4444 10%,transparent); border-color:color-mix(in srgb,#ef4444 30%,transparent); color:color-mix(in srgb,#ef4444 55%,transparent); }
.hc.ft { opacity:.22; cursor:not-allowed; pointer-events:none; }
.hc.tc { border-color:color-mix(in srgb,var(--accent) 55%,transparent); }
@keyframes pop { 0%{transform:scale(1)} 50%{transform:scale(1.38)} 100%{transform:scale(1)} }
.popped { animation:pop .18s ease; }

.sbadge { background:color-mix(in srgb,var(--amber) 15%,transparent); color:var(--amber);
  font-size:10px; font-weight:600; padding:2px 9px; border-radius:20px; white-space:nowrap; }
.pr { display:flex; align-items:center; gap:5px; min-width:88px; }
.pbg { flex:1; height:5px; border-radius:3px; background:var(--bg2); overflow:hidden; }
.pfg { height:100%; border-radius:3px; background:linear-gradient(90deg,var(--green),#34d399); transition:width .4s; }
.plbl { font-size:10px; color:var(--green); font-weight:600; min-width:26px; }

/* MONTH BAR */
.mb { display:flex; align-items:center; gap:11px; margin-bottom:14px;
  background:var(--card); border:1px solid var(--border); border-radius:12px; padding:9px 16px; }
.mbtn { background:var(--bg2); border:1px solid var(--border); color:var(--text);
  padding:5px 13px; border-radius:8px; cursor:pointer; font-family:'DM Sans'; font-size:13px; transition:all .15s; }
.mbtn:hover { border-color:var(--accent); color:var(--accent); }
.mname { font-family:'Syne',sans-serif; font-weight:700; font-size:16px; flex:1; text-align:center; }
.mscore { font-size:12px; color:var(--muted); }

/* WEEKLY */
.wt { width:100%; border-collapse:collapse; min-width:860px; }
.wt th { background:var(--bg2); padding:10px 7px; text-align:center;
  font-family:'Syne',sans-serif; font-size:10px; font-weight:700; color:var(--muted);
  letter-spacing:1px; text-transform:uppercase; border-bottom:2px solid var(--border); }
.wt th:first-child { text-align:left; padding-left:16px; min-width:158px; }
.wt th.tw { color:var(--accent); border-bottom-color:var(--accent); }
.wt td { padding:9px 7px; border-bottom:1px solid color-mix(in srgb,var(--border) 45%,transparent);
  border-right:1px solid color-mix(in srgb,var(--border) 25%,transparent);
  vertical-align:top; font-size:12px; color:var(--text2); line-height:1.5; cursor:pointer; transition:background .15s; }
.wt td:hover { background:var(--bg2); color:var(--text); }
.wt td.tw { background:color-mix(in srgb,var(--accent) 4%,transparent); }
.wt td:first-child { font-family:'Syne',sans-serif; font-size:12px; font-weight:700; color:var(--text); cursor:default; padding-left:16px; }
.wt td:first-child:hover { background:transparent; }
.wt td.wdn { color:var(--green); }

/* TOAST */
.toast { position:fixed; bottom:18px; right:18px; z-index:999;
  background:var(--card); border:1px solid var(--border); border-radius:12px;
  padding:10px 17px; font-size:13px; box-shadow:0 8px 30px var(--shadow);
  transform:translateY(68px); opacity:0; transition:all .27s ease; pointer-events:none; }
.toast.show { transform:translateY(0); opacity:1; }
.toast.ok   { border-left:3px solid var(--green); }
.toast.info { border-left:3px solid var(--accent); }

/* SCROLLBAR */
::-webkit-scrollbar { width:5px; height:5px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:var(--muted); }

/* RESPONSIVE */
@media(max-width:740px) {
  .wrap { padding:14px; }
  .sg { grid-template-columns:1fr 1fr; }
  .nb .bl { display:none; }
  .logo em { display:none; }
  .hdr { padding:0 12px; gap:8px; }
}
</style>
</head>
<body>

<header class="hdr">
  <div class="logo">Karan's Life OS <em>2026</em></div>
  <nav class="nav">
    <button class="nb on"  onclick="sp('dashboard')">ğŸ  <span class="bl">Dashboard</span></button>
    <button class="nb"     onclick="sp('goals')">ğŸ¯ <span class="bl">Goals</span></button>
    <button class="nb"     onclick="sp('schedule')">ğŸ“… <span class="bl">Schedule</span></button>
    <button class="nb"     onclick="sp('habits')">âœ… <span class="bl">Habits</span></button>
    <button class="nb"     onclick="sp('weekly')">ğŸ“† <span class="bl">Weekly</span></button>
  </nav>
  <div class="hdr-r">
    <div class="dpill" id="dp"></div>
    <span class="tlbl" id="tlbl">ğŸŒ™</span>
    <button class="ttog" onclick="toggleTheme()" title="Light / Dark mode"></button>
  </div>
</header>

<main class="wrap">

  <!-- DASHBOARD -->
  <div class="pg on" id="pg-dashboard">
    <div class="hero">
      <div class="hbadge">âœ¦ Your Life, Intentionally Designed Â· 2026 âœ¦</div>
      <h1>Build the life<br>you <em>actually</em> want</h1>
      <p>9 goals Â· 19 daily blocks Â· 10 habits â€” all tracked, all saved.</p>
    </div>
    <div class="sg" id="statsG"></div>
    <div class="stitle">Today's Schedule</div>
    <div class="sw" id="dashSched" style="margin-bottom:26px;"></div>
    <div class="stitle">Goal Progress</div>
    <div class="gg" id="dashGoals"></div>
  </div>

  <!-- GOALS -->
  <div class="pg" id="pg-goals">
    <div class="ptitle">ğŸ¯ 2026 Goals</div>
    <div class="psub">Click any step to mark complete. All progress saves automatically to your browser.</div>
    <div class="gg" id="goalsG"></div>
  </div>

  <!-- SCHEDULE -->
  <div class="pg" id="pg-schedule">
    <div class="ptitle">ğŸ“… Daily Schedule</div>
    <div class="psub">Click any block to mark done for today. Auto-highlights your current block.</div>
    <div style="display:flex;gap:18px;flex-wrap:wrap;margin-bottom:18px;">
      <span style="display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)"><span style="width:10px;height:10px;background:var(--accent);border-radius:50%;display:inline-block"></span>Current block</span>
      <span style="display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)"><span style="width:10px;height:10px;background:var(--green);border-radius:50%;display:inline-block"></span>Marked done</span>
      <span style="display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)"><span style="width:10px;height:10px;background:var(--border);border-radius:50%;display:inline-block"></span>Upcoming</span>
    </div>
    <div class="sw" id="schedFull"></div>
  </div>

  <!-- HABITS -->
  <div class="pg" id="pg-habits">
    <div class="ptitle">âœ… Habit Tracker</div>
    <div class="psub">Click cell: 1st = âœ… Done Â· 2nd = âŒ Missed Â· 3rd = Clear. Everything saves to your browser automatically.</div>
    <div class="mb">
      <button class="mbtn" onclick="chMo(-1)">â† Prev</button>
      <div class="mname" id="moName"></div>
      <button class="mbtn" onclick="chMo(1)">Next â†’</button>
      <div class="mscore" id="moScore"></div>
    </div>
    <div class="hw"><table class="ht" id="ht"></table></div>
  </div>

  <!-- WEEKLY -->
  <div class="pg" id="pg-weekly">
    <div class="ptitle">ğŸ“† Weekly Planner</div>
    <div class="psub">Goals mapped to each day of the week. Click to mark done. Resets each new week.</div>
    <div style="overflow-x:auto;background:var(--card);border:1px solid var(--border);border-radius:13px;">
      <table class="wt" id="wt"></table>
    </div>
  </div>

</main>

<div class="toast" id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const GOALS=[
  {id:'health',area:'Health & Fitness ğŸ§˜',color:'#10b981',title:'Reduce weight to 75kg',
   why:'Build muscle, reduce fat, relieve pain â€” feel stronger every day',
   deadline:'Mar 2026',status:'In Progress',
   steps:['Identify correct diet plan','Identify correct exercise plan','Set proper daily routine','Be consistent with daily routine','Start swimming','Play one daily sport'],
   measure:'Track body weight + strength weekly'},
  {id:'ai',area:'Career Growth ğŸ’¼',color:'#6366f1',title:'Learn AI & build agentic system (n8n)',
   why:'Get real customers, career stability, move beyond just development',
   deadline:'Mar 2026',status:'In Progress',
   steps:['Research Agentic AI workflow','Research n8n workflow','Identify correct course','Understand theory deeply','Create practical examples','Build real problem-solver workflow'],
   measure:'Working n8n workflow deployed'},
  {id:'popsockets',area:'Career Growth ğŸ’¼',color:'#f59e0b',title:'Popsockets Business Understanding',
   why:'Love to learn business, get more opportunities beyond just dev',
   deadline:'Mar 2026',status:'In Progress',
   steps:['Get in call with other people','Ask more questions','Be more curious about whole product','Have good conversations overall','Suggest improvements in calls'],
   measure:'Better conversations + more involvement in calls'},
  {id:'comm',area:'Relationships ğŸ¤',color:'#ec4899',title:'Improve Overall Communication',
   why:'Express ideas clearly, listen better, interact confidently in any situation',
   deadline:'Dec 2026',status:'In Progress',
   steps:['Watch communication YouTube videos daily','Record 60-sec daily speaking video','Reflect on conversations','Practice in Popsockets calls','Get feedback on communication'],
   measure:'Can speak more + suggest more in client calls'},
  {id:'income',area:'Finances ğŸ’°',color:'#f59e0b',title:'Grow monthly income to â‚¹2L+',
   why:'Build financial security for family and business expansion',
   deadline:'Dec 2026',status:'In Progress',
   steps:['Negotiate client rates','Add second client','Learn high-value tech skills','Upsell on current projects'],
   measure:'Income crossing â‚¹2L/month consistently'},
  {id:'restaurant',area:'Finances ğŸ’°',color:'#10b981',title:'Expand Rotlo Gujarati Rasdhaan',
   why:"Build Rotlo as a recognized brand in Somnath's food market",
   deadline:'Dec 2026',status:'In Progress',
   steps:['Streamline daily menu management','Automate daily tasks with AI','Grow online reviews','Build social media presence'],
   measure:'Revenue growth + consistent daily orders'},
  {id:'travel',area:'Adventure & Travel âœˆï¸',color:'#6366f1',title:'3 Family Trips This Year',
   why:'Enjoy life, strengthen family bonds, reward hard work',
   deadline:'Dec 2026',status:'Not Started',
   steps:['Plan quarterly trip schedule','Set travel budget','Book trips in advance','Experience new places with Bhumika'],
   measure:'3 trips completed with family'},
  {id:'sport',area:'Fun & Hobbies ğŸ¨',color:'#ec4899',title:'Play one sport daily',
   why:'Active lifestyle, mental reset, fun â€” non-negotiable self-care',
   deadline:'Ongoing',status:'In Progress',
   steps:['Ping pong in evening daily','Swimming on alternate days','Cricket on weekends'],
   measure:'Consistent tracking in habit tracker'},
  {id:'boat',area:'Community ğŸŒ',color:'#10b981',title:'Boat Business Expansion',
   why:'Grow 45-year family legacy, serve fishermen with better technology',
   deadline:'Dec 2026',status:'Not Started',
   steps:['Launch Meta ad campaigns','Collect customer testimonials','Target coastal cities (Diu, Okha, Porbandar)','Highlight advanced fiber tech'],
   measure:'Inquiries + orders from new coastal cities'}
];

const SCHED=[
  {t:'6:30â€“6:45 AM', i:'ğŸ’§',a:'Wake-Up & Hydrate',       d:'Warm water with fennel, fenugreek, cumin & ginger. Before phone!',  g:'Health',        p:'High',    h:6.5  },
  {t:'6:45â€“7:00 AM', i:'ğŸ§˜',a:'Morning Mobility',         d:'Spine health + mobility routine. YouTube: spine mobility.',          g:'Health',        p:'High',    h:6.75 },
  {t:'7:00â€“7:30 AM', i:'ğŸ’ª',a:'Strength Training',        d:'Bodyweight calisthenics â€” no equipment. Focus on form.',            g:'Health 75kg',   p:'Critical',h:7    },
  {t:'7:30â€“8:00 AM', i:'ğŸ¥—',a:'Healthy Breakfast',        d:'Oatmeal / Poha / Idli / Upma â€” rotate. High protein.',             g:'Health',        p:'High',    h:7.5  },
  {t:'8:00â€“9:30 AM', i:'ğŸ§ ',a:'Deep Work Block 1',        d:'Most complex task. Popsockets/client work. Phone off. No meetings.',g:'Career',        p:'Critical',h:8    },
  {t:'9:30â€“10:00 AM',i:'ğŸ—£ï¸',a:'Communication Practice',  d:'Watch 1 YouTube video OR record 2-min speaking video.',             g:'Communication', p:'High',    h:9.5  },
  {t:'10 AMâ€“12 PM',  i:'ğŸ’»',a:'Deep Work Block 2',        d:'Career skill building â€” Rails / AI / n8n workflows.',              g:'AI & Career',   p:'Critical',h:10   },
  {t:'12:00â€“1:30 PM',i:'ğŸ“‹',a:'Light Work + Coord.',      d:'Emails, Slack, code review, client updates, restaurant check-in.',  g:'Business',      p:'Medium',  h:12   },
  {t:'1:30â€“2:30 PM', i:'ğŸ±',a:'Family Lunch',             d:'Sit with family. No screens. Connection time. Laugh. Be present.',  g:'Relationships', p:'High',    h:13.5 },
  {t:'2:30â€“3:00 PM', i:'ğŸš¶',a:'Relaxation / Walk',        d:'Light walk + talk. Sunlight + movement = energy reset.',           g:'Health',        p:'Medium',  h:14.5 },
  {t:'3:00â€“5:30 PM', i:'ğŸ”§',a:'Deep Work Block 3',        d:'Dev, business tasks, or AI project. ONE thing only. No switching.', g:'Career / AI',   p:'Critical',h:15   },
  {t:'5:30â€“6:00 PM', i:'ğŸ“',a:'Sport / Ping Pong',        d:'Play ping pong or any active sport. Mandatory. Have fun!',         g:'Health',        p:'High',    h:17.5 },
  {t:'6:00â€“6:30 PM', i:'ğŸ”¥',a:'Core Workout',             d:'Core exercises routine. Consistency > intensity. Show up!',        g:'Health 75kg',   p:'High',    h:18   },
  {t:'6:30â€“7:00 PM', i:'ğŸ““',a:'Self-Reflection & Plan',   d:"Fill daily tracker + record 60-sec video on today's wins.",        g:'All Goals',     p:'High',    h:18.5 },
  {t:'7:00â€“7:30 PM', i:'ğŸ½ï¸',a:'Dinner',                  d:'Light healthy dinner. Dal + sabzi. Eat before 7:30 PM.',           g:'Health',        p:'Medium',  h:19   },
  {t:'7:30â€“8:30 PM', i:'ğŸ“š',a:'Learning & Skill Growth',  d:'AI course / n8n tutorials / Rails advanced / business concepts.',  g:'AI & Career',   p:'Critical',h:19.5 },
  {t:'8:30â€“10:00 PM',i:'ğŸ ',a:'Family & Relaxation',      d:'Quality time with Bhumika. No work. Be fully present.',           g:'Relationships', p:'High',    h:20.5 },
  {t:'10:00â€“10:30 PM',i:'ğŸŒ™',a:'Mobility & Gut Health',   d:'Evening mobility + gut health practice.',                          g:'Health',        p:'Medium',  h:22   },
  {t:'10:30 PMâ€“Bed',  i:'ğŸŒŸ',a:'Wind Down',               d:'Bhumika time â†’ meditate 5 min â†’ read 10 pages â†’ gratitude.',     g:'Relationships', p:'High',    h:22.5 }
];

const HABITS=[
  {id:'workout',   i:'ğŸ’ª',l:'Morning workout / calisthenics'},
  {id:'water',     i:'ğŸ’§',l:'Drink 8 glasses of water'},
  {id:'breakfast', i:'ğŸ¥—',l:'Healthy breakfast (no junk)'},
  {id:'ai_learn',  i:'ğŸ¤–',l:'30 min AI / n8n learning'},
  {id:'deepwork',  i:'ğŸ’¼',l:'Deep work block (8â€“10 AM)'},
  {id:'comm',      i:'ğŸ—£ï¸',l:'Communication practice'},
  {id:'sport',     i:'ğŸ“',l:'Evening sport (ping pong / any)'},
  {id:'reflect',   i:'ğŸ““',l:'Daily reflection + tracker fill'},
  {id:'read',      i:'ğŸ“š',l:'Read 10 pages'},
  {id:'sleep',     i:'ğŸŒ™',l:'Sleep by 11:30 PM'}
];

const WEEKLY=[
  {a:'ğŸ’ª Health & Fitness', t:['Morning workout\n+ Weigh in','Workout\n+ Track food','Workout\n+ Swimming','Workout\n+ Weigh in','Workout\n+ Track food','Active sport\n+ Weekly weigh','Rest\n+ Light walk']},
  {a:'ğŸ¤– AI & n8n Learning',t:['Research 1 AI concept','n8n tutorial\n(30 min)','Build small\nn8n flow','Study AI theory','Practical example','Work on real\nworkflow','Review week\nlearning']},
  {a:'ğŸ’¼ Popsockets / Work', t:['Deep work\n(Code/Feature)','Deep work\n+ Meeting prep','Deep work\n(Code/Feature)','Deep work\n+ Client update','Deep work\n(Code/Review)','Catch up + docs\n+ Week plan','Rest\n(work-free)']},
  {a:'ğŸ—£ï¸ Communication',    t:['Watch video\nRecord 60-sec','Practice with\nsomeone','Watch video\nRecord 60-sec','Popsockets call\n(engage more)','Watch video\nRecord 60-sec','Review week\nvideos','Watch 1 long\ntalk']},
  {a:'ğŸ’° Finances',          t:['Restaurant check\n+ Expenses','Income vs\ntarget review','Boat biz task','Savings/invest\ncheck','Side income\nopportunity','Financial\nweekly review','Plan next\nweek budget']},
  {a:'â¤ï¸ Relationships',    t:['Quality time\nw/ Bhumika','Call parents\nor friends','Quality time\nw/ Bhumika','Help family\nmember','Quality time\nw/ Bhumika','Family outing\nor activity','Date night\nw/ Bhumika']},
  {a:'ğŸ“š Self-Growth',       t:['Read 10 pages','Reflect\n+ journal','Read 10 pages','Reflect\n+ journal','Read 10 pages','Weekly goal\nreview','Set intentions\nnext week']}
];

const MN=['January','February','March','April','May','June','July','August','September','October','November','December'];
const DN=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE â€” persisted to localStorage
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const KEY='karanLifeOS_2026_v2';
function loadS(){ try{return JSON.parse(localStorage.getItem(KEY))||{};}catch{return{};} }
function saveS(){ try{localStorage.setItem(KEY,JSON.stringify(S));}catch{} }

let S=Object.assign({
  goalSteps:{},  // { goalId:[bool,...] }
  habits:{},     // { 'YYYY-MM-DD|hid':'done'|'miss' }
  schedDone:{},  // { 'YYYY-MM-DD|idx':true }
  weekDone:{},   // { 'wk|ri|di':true }
  moM: new Date().getMonth(),
  moY: new Date().getFullYear(),
  theme:'dark'
},loadS());

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  THEME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyTheme(t){
  document.documentElement.setAttribute('data-theme',t);
  document.getElementById('tlbl').textContent=t==='dark'?'ğŸŒ™':'â˜€ï¸';
}
function toggleTheme(){ S.theme=S.theme==='dark'?'light':'dark'; applyTheme(S.theme); saveS(); }
applyTheme(S.theme);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const now=new Date();
const TODAY=now.toISOString().split('T')[0];
const curH=()=>now.getHours()+now.getMinutes()/60;
const dim=(y,m)=>new Date(y,m+1,0).getDate();
function wkKey(){
  const d=new Date(),y=d.getFullYear(),s=new Date(y,0,1);
  return `${y}-W${Math.ceil(((d-s)/86400000+s.getDay()+1)/7)}`;
}
function toast(msg,type='ok'){
  const e=document.getElementById('toast');
  e.textContent=msg; e.className=`toast show ${type}`;
  clearTimeout(e._t); e._t=setTimeout(()=>e.className='toast',2100);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const REND={dashboard:rDash,goals:rGoals,schedule:rSched,habits:rHabits,weekly:rWeekly};
function sp(name){
  document.querySelectorAll('.pg').forEach(p=>p.classList.remove('on'));
  document.querySelectorAll('.nb').forEach(b=>b.classList.remove('on'));
  document.getElementById('pg-'+name).classList.add('on');
  [...document.querySelectorAll('.nb')].find(b=>b.getAttribute('onclick').includes(name)).classList.add('on');
  REND[name]?.();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcStats(){
  let todayDone=0;
  HABITS.forEach(h=>{if(S.habits[`${TODAY}|${h.id}`]==='done')todayDone++;});
  let sDone=SCHED.filter((_,i)=>S.schedDone[`${TODAY}|${i}`]).length;
  let stDone=0;
  GOALS.forEach(g=>(S.goalSteps[g.id]||[]).forEach(v=>{if(v)stDone++;}));
  const y=now.getFullYear(),m=now.getMonth();
  let tot=0,dn=0;
  for(let d=1;d<=now.getDate();d++){
    const ds=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    HABITS.forEach(h=>{tot++;if(S.habits[`${ds}|${h.id}`]==='done')dn++;});
  }
  return{todayDone,sDone,stDone,mPct:tot?Math.round(dn/tot*100):0};
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function rDash(){
  document.getElementById('dp').textContent=`${DN[now.getDay()]}, ${now.getDate()} ${MN[now.getMonth()]} ${now.getFullYear()}`;
  const{todayDone,sDone,stDone,mPct}=calcStats();
  document.getElementById('statsG').innerHTML=
    [['Today\'s Habits',`${todayDone}/${HABITS.length}`],
     ['Schedule Blocks Done',`${sDone}/${SCHED.length}`],
     ['Goal Steps Done',`${stDone}`],
     ['Month Habit Score',`${mPct}%`]]
    .map(([l,n])=>`<div class="sc"><div class="sn">${n}</div><div class="sl">${l}</div></div>`).join('');

  const ch=curH();
  let ci=SCHED.findIndex((s,i)=>s.h<=ch&&(SCHED[i+1]?SCHED[i+1].h:25)>ch);
  if(ci<0)ci=SCHED.length-1;
  const sl=SCHED.slice(Math.max(0,ci-1),ci+4);
  document.getElementById('dashSched').innerHTML=buildSched(sl,Math.max(0,ci-1),5);

  document.getElementById('dashGoals').innerHTML=GOALS.map(g=>{
    const st=S.goalSteps[g.id]||Array(g.steps.length).fill(false);
    const dn=st.filter(Boolean).length,pct=g.steps.length?Math.round(dn/g.steps.length*100):0;
    return `<div class="gc" style="border-top:3px solid ${g.color}" onclick="sp('goals')">
      <div class="garea">${g.area}</div>
      <div class="gtitle">${g.title}</div>
      <div class="pb"><div class="pf" style="width:${pct}%;background:${g.color}"></div></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:5px">
        <span style="font-size:11px;color:var(--muted)">${dn}/${g.steps.length} steps</span>
        <span style="font-size:12px;color:${g.color};font-weight:700">${pct}%</span>
      </div></div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GOALS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function rGoals(){
  document.getElementById('goalsG').innerHTML=GOALS.map(g=>{
    const st=S.goalSteps[g.id]||Array(g.steps.length).fill(false);
    const dn=st.filter(Boolean).length,pct=g.steps.length?Math.round(dn/g.steps.length*100):0;
    const sc=g.status==='Achieved'?'done':g.status==='Not Started'?'pend':'';
    return `<div class="gc" style="border-top:3px solid ${g.color}">
      <div class="garea">${g.area}</div>
      <div class="gtitle">${g.title}</div>
      <div class="gwhy">${g.why}</div>
      <div class="pb"><div class="pf" style="width:${pct}%;background:${g.color}"></div></div>
      <div style="display:flex;justify-content:space-between;margin-bottom:11px;margin-top:4px">
        <span style="font-size:11px;color:var(--muted)">${dn}/${g.steps.length} steps Â· ${pct}%</span>
        <span class="gsb ${sc}">${g.status}</span>
      </div>
      <div>${g.steps.map((s,si)=>`
        <div class="srow ${st[si]?'ck':''}" onclick="toggleStep('${g.id}',${si})">
          <div class="sb">${st[si]?'âœ“':''}</div>${s}
        </div>`).join('')}
      </div>
      <div class="gmeta">
        <span class="gdl">ğŸ—“ ${g.deadline}</span>
        <span style="font-size:11px;color:var(--muted)">${g.measure}</span>
      </div></div>`;
  }).join('');
}
function toggleStep(gid,si){
  const g=GOALS.find(x=>x.id===gid);
  if(!S.goalSteps[gid])S.goalSteps[gid]=Array(g.steps.length).fill(false);
  S.goalSteps[gid][si]=!S.goalSteps[gid][si];
  saveS();rGoals();rDash();
  toast(S.goalSteps[gid][si]?'âœ… Step done!':'â†© Step cleared');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SCHEDULE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildSched(blocks,offset,max){
  const ch=curH();
  return blocks.slice(0,max).map((s,ri)=>{
    const ai=offset+ri,next=SCHED[ai+1];
    const isCur=s.h<=ch&&(next?next.h:25)>ch;
    const isDn=!!S.schedDone[`${TODAY}|${ai}`];
    const pc=s.p==='Critical'?'pt-c':s.p==='High'?'pt-h':'pt-m';
    return `<div class="sb2 ${isCur?'cur':''} ${isDn?'dn':''}" onclick="toggleSched(${ai})">
      <div class="st ${isCur?'now':''}">${s.t}</div>
      <div>
        <div class="stit">${s.i} ${s.a}${isDn?' <span style="color:var(--green);font-size:10px">âœ“ done</span>':isCur?' <span style="color:var(--accent);font-size:10px">â† NOW</span>':''}</div>
        <div class="sdet">${s.d}</div>
        <span class="sgt">${s.g}</span>
      </div>
      <span class="pt ${pc}">${s.p}</span>
    </div>`;
  }).join('');
}
function rSched(){ document.getElementById('schedFull').innerHTML=buildSched(SCHED,0,SCHED.length); }
function toggleSched(idx){
  const k=`${TODAY}|${idx}`;
  S.schedDone[k]=!S.schedDone[k];
  saveS();rSched();rDash();
  toast(S.schedDone[k]?'âœ… Block done!':'â†© Block cleared');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HABIT TRACKER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function chMo(d){
  S.moM+=d;
  if(S.moM>11){S.moM=0;S.moY++;}
  if(S.moM<0) {S.moM=11;S.moY--;}
  saveS();rHabits();
}

function rHabits(){
  const y=S.moY,m=S.moM;
  const days=dim(y,m);
  const isCurMo=y===now.getFullYear()&&m===now.getMonth();
  const todD=now.getDate();
  const upTo=isCurMo?todD:days;

  document.getElementById('moName').textContent=`${MN[m]} ${y}`;

  // month score
  let tot=0,dn=0;
  for(let d=1;d<=upTo;d++){
    const ds=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    HABITS.forEach(h=>{tot++;if(S.habits[`${ds}|${h.id}`]==='done')dn++;});
  }
  document.getElementById('moScore').textContent=`${tot?Math.round(dn/tot*100):0}% Â· ${dn}/${tot} done`;

  // header: icon col + habit name col + day cols + score + pct
  let ths='<th></th><th>HABIT</th>';
  for(let d=1;d<=days;d++){
    const isT=isCurMo&&d===todD;
    ths+=`<th class="${isT?'th-today':''}">${d}</th>`;
  }
  ths+='<th>SCORE</th><th>%</th>';

  // body
  let rows='';
  HABITS.forEach((h,hi)=>{
    let dcnt=0,cells='';
    for(let d=1;d<=days;d++){
      const ds=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
      const k=`${ds}|${h.id}`;
      const v=S.habits[k];
      const isT=isCurMo&&d===todD;
      const isFut=isCurMo&&d>todD;
      let cls='',txt='';
      if(v==='done'){cls='dn';txt='âœ…';dcnt++;}
      else if(v==='miss'){cls='ms';txt='âŒ';}
      else if(isFut){cls='ft';txt='Â·';}
      else if(isT){cls='tc';}
      cells+=`<td><div class="hc ${cls}" onclick="togHabit(this,'${isFut?'':k}')">${txt}</div></td>`;
    }
    const pct=upTo>0?Math.round(dcnt/upTo*100):0;
    rows+=`<tr>
      <td>${h.i}</td>
      <td>${h.l}</td>
      ${cells}
      <td><span class="sbadge">${dcnt}/${upTo}</span></td>
      <td><div class="pr"><div class="pbg"><div class="pfg" style="width:${pct}%"></div></div><span class="plbl">${pct}%</span></div></td>
    </tr>`;
  });

  document.getElementById('ht').innerHTML=`<thead><tr>${ths}</tr></thead><tbody>${rows}</tbody>`;
}

function togHabit(el,k){
  if(!k)return;
  const cur=S.habits[k];
  if(!cur)         {S.habits[k]='done';el.textContent='âœ…';el.className='hc dn';toast('âœ… Habit done!');}
  else if(cur==='done'){S.habits[k]='miss';el.textContent='âŒ';el.className='hc ms';toast('âŒ Missed','info');}
  else             {delete S.habits[k];el.textContent='';el.className='hc';toast('Cleared');}
  el.classList.add('popped');
  setTimeout(()=>el.classList.remove('popped'),180);
  saveS();
  // lightweight score update
  const y=S.moY,m=S.moM,upTo=S.moY===now.getFullYear()&&S.moM===now.getMonth()?now.getDate():dim(y,m);
  let tot=0,dn=0;
  for(let d=1;d<=upTo;d++){
    const ds=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    HABITS.forEach(h=>{tot++;if(S.habits[`${ds}|${h.id}`]==='done')dn++;});
  }
  document.getElementById('moScore').textContent=`${tot?Math.round(dn/tot*100):0}% Â· ${dn}/${tot} done`;
  rDash();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  WEEKLY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function rWeekly(){
  const wk=wkKey();
  const todIdx=(now.getDay()+6)%7; // Mon=0
  const days=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
  let ths=`<th>GOAL AREA</th>`+days.map((d,i)=>`<th class="${i===todIdx?'tw':''}">${d}</th>`).join('');
  let rows=WEEKLY.map((row,ri)=>{
    let tds=`<td>${row.a}</td>`;
    tds+=row.t.map((task,di)=>{
      const k=`${wk}|${ri}|${di}`;
      const dn=!!S.weekDone[k];
      return `<td class="${di===todIdx?'tw':''} ${dn?'wdn':''}" onclick="togWeek('${k}')">${dn?'âœ… ':''}${task.replace(/\n/g,'<br>')}</td>`;
    }).join('');
    return `<tr>${tds}</tr>`;
  }).join('');
  document.getElementById('wt').innerHTML=`<thead><tr>${ths}</tr></thead><tbody>${rows}</tbody>`;
}
function togWeek(k){
  S.weekDone[k]=!S.weekDone[k];
  saveS();rWeekly();
  toast(S.weekDone[k]?'âœ… Task done!':'â†© Task cleared');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
S.moM=S.moM??now.getMonth();
S.moY=S.moY??now.getFullYear();
rDash();
</script>
</body>
</html>
